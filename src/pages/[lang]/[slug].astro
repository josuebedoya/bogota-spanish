---
import { validateRoute } from "@/i18n/utils";

const { slug } = Astro.params;

const { route } = await validateRoute(Astro.url, slug);

if (!route) {
  return Astro.redirect("/404");
}

let Page;
if (route === "home") {
  Page = await import(`../../pages/index.astro`);
} else {
  Page = await import(`../../templates/${route}.astro`);
}

if (!Page) {
  return Astro.redirect("/404");
}
---

<Page.default />
