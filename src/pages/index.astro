---
import { staticData } from "@/server/static-data";
import Home from "@/templates/home.astro";
import { getHomeData } from "@/server/services/getHomeData";
import { getLang } from "@/i18n/utils";

const lang = getLang(Astro.url);

const {
  dataMainBanner,
  dataBanner2,
  dataSpanishCourses,
  dataSayOurStudents,
  dataBookingTasterSession,
  dataFaq,
  error,
} = await getHomeData(lang);

if (error) {
  return Astro.redirect("/500");
}
---

<Home
  title={staticData.home.title}
  description={staticData.home.description}
  dataMainBanner={dataMainBanner}
  dataBanner2={dataBanner2}
  dataSpanishCourses={dataSpanishCourses}
  dataSayOurStudents={dataSayOurStudents}
  dataBookingTasterSession={dataBookingTasterSession}
  dataFaq={dataFaq}
/>
