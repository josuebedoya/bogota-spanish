---
import BannerTypeTwo from "@/components/species/BannerTypeTwo.astro";
import BannerTypeOne from "@/components/species/BannerTypeOne.astro";
import BannerSpanishCourses from "@/components/atoms/BannerSpanishCourses.astro";
import LayoutPage from "@/layouts/LayoutPage.astro";
import { getSpanishCoursesData } from "@/server/services/getSpanishCoursesData";
import { getLang } from "@/i18n/utils";

const lang = getLang(Astro.url);
const { dataMainBanner, dataBannerSpanishCourses, page, courses, error } = (await getSpanishCoursesData(
  lang,
)) as any;

if (error) {
  return Astro.redirect("/500");
}
---

  <LayoutPage
    title={page?.title_main_banner}
    description={page?.summary_main_banner?.slice(0, 150) + "..."}
  >
    <div class="about-page-area-wrapper single-page-section-top-space">
      <BannerTypeTwo {...dataMainBanner} mainTitle={true} withGradient={false} />
      <div class="list-courses">
        {
          courses?.reverse()?.map((c: any) => {
            return c.isEven ? (
              <div class={`item-course ${c.isLast ? "last-item" : ""}`}>
                <BannerTypeOne {...c} imageLeft={true} />
              </div>
            ) : (
              <div class={`item-course ${c.isLast ? "last-item" : ""}`}>
                <BannerTypeTwo {...c} withGradient={false} />
              </div>
            );
          })
        }
      </div>
      <BannerSpanishCourses {...dataBannerSpanishCourses} />
    </div>
  </LayoutPage>
